<html>
<script src='tweeeeeeeeeet.js'></script>
<script type="text/javascript">
	function shorten() {
		
		document.getElementById('errorMessage').textContent = '';
		var program = "shortenTweet: '" + document.getElementById('yourTweet').value + "' " +  document.getElementById('tweeeeeeeeeetProgram').value;
		var parseResult = '';
		try{
			 parseResult = parser.parse(program);
		}
		catch(e) {
			document.getElementById('errorMessage').textContent = e.name + ' Error: (' + e.line + ',' + e.column + ') ' + e.message;
		}
		
		document.getElementById('result').textContent = parseResult;
		showResultLength();
	}

	function showLength() {
		document.getElementById('yourTweetLength').textContent = document.getElementById('yourTweet').value.length;
	}

	function tweetWithShortenedUrlsLength(tweet) {
		var urlRegExp = /(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?/;
		var length = tweet.length;
		var shortUrlsLength = 0;
		
		var match;
		while (match = tweet.match(urlRegExp)) {
		
			tweet = tweet.replace(urlRegExp, 'x');
			length = tweet.length;
			shortUrlsLength += 19;
		}
		
		return (length + shortUrlsLength);
	}

	function showResultLength() {
		document.getElementById('resultLength').textContent = tweetWithShortenedUrlsLength(document.getElementById('result').textContent);
	}
</script>
<body>
<title>tweeeeeeeeeet</title>
<form>
	<h1>Your tweeeeeeeeeet</h1>
	<textarea id='yourTweet' rows=8 cols=80 onchange='showLength()'></textarea>
	<br />
	<button type='button' id='shortenBotton' onClick='shorten()'>Shorten your tweet</button>   <label>Lenght: </label><span id='yourTweetLength' >0</span>
	<br />
	<br />
	
	<h1>Your tweet shortened</h1>
	<textarea id='result' readonly=true rows=8 cols=80' style='{background-color:#d0e4fe;}'>Your tweet shortened here.</textarea>
	<br />
	<label>Lenght: </label><span id='resultLength' >0</span>
	<br />
	<br />

	<h1>Tweeeeeeeeeet instructions to shorten your tweeeeeeeeeet</h1>
    <span id='errorMessage' style="color:red"></span>
	<br />
	<br />
<	<textarea id='tweeeeeeeeeetProgram' rows=80 cols=60 >replaceUntilFit:
(
  substring: '  ' -> ' '
  'with' -> 'w/'
  'without' -> 'w/o'
  'before' -> 'b4'
  'because' -> 'b/c'
  'by the way' -> 'BDW'
  'and' -> '&'
  'today' -> '2day'
  'tonight' -> '2night'
  'tomorrow' -> '2morrow'
  'busy' -> 'BZ'
  'easy' -> 'EZ'
  'you are' -> 'UR'
  'you' -> 'U'
  'are' -> 'R'
  'why' -> 'Y'
  'number' -> '#'
  'to be' -> '2B'
  'too late' -> '2L8'
  'late' -> 'L8'
  'great' -> 'gr8'
  'wait' -> 'w8'
  'waiting' -> 'w8N'
  'hate' -> '8'
   substring: 'hate' -> '8'
   substring: 'eat' -> '8'
   substring: 'ait' -> '8'
  'greater than' -> '>'
  'less than' -> '<'
  'one' -> '1'
  'once' -> '1NC'
  'two' -> '2'
  'three' -> '3'
  'four' -> '4'
  'ten' -> '10'
  'tens' -> '10s'
  'hundred' -> '100'
  'hundreds' -> '100s'
  'thousand' -> '1000'
  'thousands' -> '1000'
  'thanks' -> '10X'
  'thank you' -> '10U'
  '3hreesome ' -> '3SUM'
  'for you' -> '4U'
  'see you' -> 'CU'
  'I see' -> 'IC'
  'excellent' -> 'XLNT'
  'excell' -> 'XL'
   substring: 'for' -> '4'
   substring: 'too' -> '2'
   substring: 'two' -> '2'
   substring: 'tree' -> '3'
   substring: 'ttre' -> '3'
   substring: 'tre' -> '3'
   substring: 'four' -> '4'
   substring: 'for' -> '4'
   substring: 'see' -> 'C'
   'see' -> 'C'
   'at work' -> '@WRK'
   'work' -> 'WRK'
   'at' -> '@'
   'the' -> 'D'
   'their' -> 'Dr'
   'that' -> 'Dt'
   'this' -> 'Ds'
   'your' -> 'Ur'
 )</textarea>
 /form>
</body>
</html> 